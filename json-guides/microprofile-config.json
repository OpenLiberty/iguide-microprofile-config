{
    "name": "MicroprofileConfig",
    "title": "Microprofile Config",
    "description": "Creating a unified config for your sources",
    "duration": "10 minutes",
    "audience": "developer",
    "repo": "https://github.com/OpenLiberty/iguide-microprofile-config",
    "steps": [
        {
            "name": "Intro",
            "title": "What you'll learn",
            "guide_duration" : "25 minutes",
            "description": [
              "temp"
            ]
        },
        {
            "name": "ConfigurePropsFile",
            "title": "Configure using a Properties File",
            "description": [
                "In Websphere Liberty, you can provide a properties file as part of your Liberty environment configuration. This properties file lets you specify configuration for overriding injected values.",
                "",
                "Add the download-url property to the microprofile-config.properties file to override the injected value of the download-url. The properties file contains settings with a default ordinal of 100 which overrides the injected properties with the same name. If a property appears in more than one source, then the property value from the source with the highest ordinal takes precedence. The download-url property in the microprofile-config.properties will be used because the injected default value is only used when no other config sources are provided."
            ],
            "instruction": [
              "Add the <code>download-url=ftp://music.com/canada/download</code> on line 1 or click <action title='Configure download-url in microprofile-config.properties' onclick=\"microprofileConfigCallBack.addPropToConfigProps(event)\"><b>download-url=ftp://music.com/canada/download</b></action>. Then, click <action title='Run' onclick=\"microprofileConfigCallBack.saveServerEnvButton(event)\"><b>Run</b></action> on the editor menu pane.",
              "Click <action title='Refresh' onclick=\"microprofileConfigCallBack.serverEnvRefreshBrowserButton(event)\"><b>Refresh</b></action> in the following browser to see that the download-url in the microprofile-config.properties file is used.<br/>"
            ],
            "content":[
              {
                "displayType":"fileEditor",
                "fileName": "microprofile-config.properties",
                "preload": [
                ],
                "save": false,
                "callback": "(function test(editor) {microprofileConfigCallBack.listenToEditorForPropConfig(editor); })"
              },
              {
                "displayType":"webBrowser",
                "url": "https://music.com/download",
                "browserContent": "/guides/iguide-microprofile-config/html/interactive-guides/microprofile-config/download-from-injection.html",
                "callback": "(function test(webBrowser) {microprofileConfigCallBack.listenToBrowserForPropFileConfig(webBrowser); })"
              }
            ]
        },
        {
            "name": "ConfigureAsEnvVar",
            "title": "Configuring as an Environment Variable",
            "description": [
                "In Websphere Liberty, environment variables can be configured in the ${server.config.dir}/server.env file to customize the Liberty environment.",
                "",
                "After you add your <code>/META-INF/microprofile-config.properties</code> file to override the download-url, add the download-url to the server.env file. The server.env contains the environment settings with the default ordinal of 300 which is higher than the 100 for the microprofile-config.properties. If a property appears in more than one source, then the property value from the source with the highest ordinal takes precedence. The download-url property in the server.env will be used."
            ],
            "instruction": [
              "Add the <code>download-url=ftp://music.com/asia/download</code> on line 2, after the WLP_SKIP_MAXPERMSIXE=true or click <action title='Configure download-url in server.env' onclick=\"microprofileConfigCallBack.addPropToServerEnvButton(event)\"><b>download-url=ftp://music.com/asia/download</b></action>. Then, click <action title='Run' onclick=\"microprofileConfigCallBack.saveServerEnvButton(event)\"><b>Run</b></action> on the editor menu pane.",
              "Click <action title='Refresh' onclick=\"microprofileConfigCallBack.serverEnvRefreshBrowserButton(event)\"><b>Refresh</b></action> in the following browser to see the download-url in the server.env file is used.<br/>"
            ],
            "content":[
              {
                "displayType":"fileEditor",
                "fileName": "server.env",
                "preload": [
                    "WLP_SKIP_MAXPERMSIZE=true",
                    ""
                ],
                "readonly": [
                  {
                      "from": "1",
                      "to": "1"
                  }
                ],
                "save": false,
                "callback": "(function test(editor) {microprofileConfigCallBack.listenToEditorForServerEnv(editor); })"
              },
              {
                "displayType":"webBrowser",
                "url": "https://music.com/download",
                "browserContent": "/guides/iguide-microprofile-config/html/interactive-guides/microprofile-config/download-from-properties-file.html",
                "callback": "(function test(webBrowser) {microprofileConfigCallBack.listenToBrowserForServerEnvConfig(webBrowser); })"
              }
            ]
        }
    ]
}